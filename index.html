<!DOCTYPE html>
<html>
	<head>
		<title>NIRANJAN CREATIONS</title>
	</head>
	<style>
		h1{
			border:1px solid cyan;
			border-radius:20px;
			padding:20px;
			}
		button{
			color:white;
			background-color:#0f2025;
			border:1px solid cyan;
			border-radius:20px;
			padding:20px;
			font-size:25px;
			}
	</style>
	<body style="background-color:#0f2025;color:silver;">
		<center>
			<h1>WELCOME TO NIRANJAN CREATIONS</h1>
			<video autoplay playsinline style="height:100%;width:100%;" muted></video>
			<script>
			const ws=new WebSocket("ws://192.168.1.170:8765"), pc=new 				RTCPeerConnection(), vid=document.querySelector("video");

			pc.onicecandidate=e=>{ if(e.candidate) 							ws.send(JSON.stringify({type:"ice",data:e.candidate})) }
			pc.ontrack=e=>vid.srcObject=e.streams[0];

			ws.onmessage=async m=>{
			    const msg=JSON.parse(m.data);
				    if(msg.type==="offer"){
			        await pc.setRemoteDescription(msg.data);
				        const answer=await pc.createAnswer();
					        await pc.setLocalDescription(answer);
			        ws.send(JSON.stringify({type:"answer",data:answer}));
   			 }
		   		 if(msg.type==="ice") await pc.addIceCandidate(msg.data);
			}
			</script>
	</body>
</html>